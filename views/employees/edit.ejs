<h1 class="text-2xl font-bold mb-4">Edit Employee</h1>

<form action="/employees/<%= employee._id %>?_method=PUT" method="POST" class="space-y-4">
  <div>
    <label class="block">Name</label>
    <input type="text" name="name" value="<%= employee.name %>" required class="border px-2 py-1 w-full">
  </div>

  <div>
    <label class="block">Email</label>
    <input type="email" name="email" value="<%= employee.email %>" required class="border px-2 py-1 w-full">
  </div>

  <div>
    <label class="block">Job Title</label>
    <input type="text" name="jobTitle" value="<%= employee.jobTitle %>" class="border px-2 py-1 w-full">
  </div>

  <div>
    <label class="block">Department</label>
    <select name="department" required class="border px-2 py-1 w-full">
      <% departments.forEach(d => { %>
        <option value="<%= d._id %>" <%= employee.department.equals(d._id) ? 'selected' : '' %>>
          <%= d.name %>
        </option>
      <% }) %>
    </select>
  </div>

  <div>
    <label class="block">Supervisor</label>
    <select name="supervisor" class="border px-2 py-1 w-full">
      <option value="">-- None --</option>
      <% employeesList.forEach(e => { 
           if (!employee._id.equals(e._id)) { %>
        <option value="<%= e._id %>" <%= employee.supervisor && employee.supervisor.equals(e._id) ? 'selected' : '' %>>
          <%= e.name %>
        </option>
      <% } }) %>
    </select>
  </div>

  <!-- Country / State / City -->
  <div>
    <label class="block">Country</label>
    <select id="country" name="country" data-selected="<%= employee.country %>" class="border px-2 py-1 w-full"></select>
  </div>
  <div>
    <label class="block">State</label>
    <select id="state" name="state" data-selected="<%= employee.state %>" class="border px-2 py-1 w-full"></select>
  </div>
  <div>
    <label class="block">City</label>
    <select id="city" name="city" data-selected="<%= employee.city %>" class="border px-2 py-1 w-full"></select>
  </div>

  <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Update</button>
  <a href="/employees" class="bg-gray-400 text-white px-4 py-2 rounded">Cancel</a>
</form>

<script src="/js/location-dropdowns.js"></script>
